<%= f.error_notification request: f.object.errors[:request].to_sentence %>
<div class="card m-2 p-4">
  <div class="form-group row d-flex">
    <div class="col-8">
      <div class="row">
        <div class="col-12 col-md-10">
          <% selected_value = @request.user_id.present? ? @request.user_id : nil %>
          <%= f.input "Usuario", :input_html => { :value => @request.try(:user).try(:full_name)}, disabled: true %>
        </div>
        <% if current_user.is_admin? %>
          <div class="col-12 col-md-10 m-1">
            <%= f.input :description, as: :text, required: true %>
          </div>
        <% else %>
        <div class="col-12 col-md-10 m-1">
          <%= f.input :description, as: :text, disabled: true %>
        </div>
        <% end %>
      </div>
    </div>
    <div class="col-4">
      <div class="col-12 col-md-6 col-sm-12">
        <%= f.label "Fecha de pago" %><br>
        <%= f.input :payment_date, as: :date, html5: true, label: false %>
      </div>
    </div>
  </div>
</div>

<%= f.submit 'Actualizar', :class => 'btn btn-primary' %>

<script>
$(document).on("turbolinks:load", function() {
  $("#request_category_id").select2({
    tags: false,
    placeholder: "Seleccionar Categoría",
    width: "100%"
  });

  $("#request_subcategory_id").select2({
    tags: false,
    placeholder: "Seleccionar Subcategoría",
    width: "100%"
  });

  $("#request_user_id").select2({
    tags: false,
    placeholder: "Seleccionar Usuario",
    width: "100%"
  });
});

function update_request_subscategories(category_id) {  
  jQuery.ajax({
    url: `/admin/helpcenter_requests/subcategories`,
    type: "GET",
    data: { "category_id": category_id },
    dataType: "script"
  });
}
</script>